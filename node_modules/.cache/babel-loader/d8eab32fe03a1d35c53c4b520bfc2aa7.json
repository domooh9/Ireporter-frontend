{"ast":null,"code":"var _jsxFileName = \"/home/dom/ireporterapp/src/components/SignupSignin/components/user/dashboard/FormUpdate.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function FormUpdate(_ref) {\n  _s();\n  let {\n    onUpdateMessage\n  } = _ref;\n  const [message, setMessage] = useState(\"\");\n  const [postdescription, setpostDescription] = useState(\"\");\n  const [postlocation, setpostLocation] = useState(\"\");\n  const [posttype, setpostType] = useState();\n  const [postimage, setPostImage] = useState(\"\");\n  const [editId, setEditId] = useState(\"\");\n  const [userId, setUserId] = useState(\"\");\n  useEffect(() => {\n    const edit = JSON.parse(localStorage.getItem(\"edit\"));\n    setEditId(edit.id);\n    setUserId(edit.user_id);\n    setMessage(edit.title);\n    setpostDescription(edit.description);\n    setpostLocation(edit.location);\n    setpostType(edit.incident_type);\n    setPostImage(edit.image_url);\n  }, []);\n\n  //Handle incident update \n  //  function handle_update(formData) {\n  //     const id = formData.id\n  //     delete formData.id\n  //     fetch(`http://[::1]:3000/incidents/${id}`, {\n  //       method: 'PATCH',\n  //       headers: {\n  //         \"Content-Type\": \"application/json\",\n  //       },\n  //       body: JSON.stringify({\n  //         body: formData,\n  //       })\n  //     })\n  //       .then((res) => res.json())\n  //       .then((data) => console.log(data))\n  //   }\n\n  function handleFormSubmit(e) {\n    e.preventDefault();\n    fetch(`https://irep-backend.herokuapp.com/incidents/${editId}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        title: message,\n        incident_type: posttype,\n        description: postdescription,\n        image_url: postimage,\n        location: postlocation,\n        user_id: userId\n      })\n    }).then(r => r.json()).then(updatedMessage => onUpdateMessage(updatedMessage));\n    window.location.reload(false);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-container_1\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"register-form_1\",\n        onSubmit: handleFormSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          form: \"Categories\",\n          id: \"field\",\n          className: \"form-field\",\n          autofocus: true,\n          onChange: e => setpostType(e.target.value),\n          name: \"incident_type\",\n          value: posttype,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            disabled: true,\n            children: \"Select\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"intervention\",\n            children: \"Create an intervention\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"redflag\",\n            children: \"Create a red flag\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"case-title\",\n          className: \"form-field_1\",\n          type: \"text\",\n          placeholder: \"Enter your title\",\n          name: \"title\",\n          onChange: e => setMessage(e.target.value),\n          value: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"desc-rption\",\n          className: \"form-field_1\",\n          type: \"text\",\n          placeholder: \"Description\",\n          name: \"description\",\n          onChange: e => setpostDescription(e.target.value),\n          value: postdescription\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"loc-tion\",\n          className: \"form-field_1\",\n          type: \"text\",\n          placeholder: \"Location\",\n          name: \"location\",\n          onChange: e => setpostLocation(e.target.value),\n          value: postlocation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"image\",\n          className: \"form-field_1\",\n          type: \"url\",\n          placeholder: \"Image Url\",\n          name: \"image_url\",\n          onChange: e => setPostImage(e.target.value),\n          value: postimage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"form-field_1\",\n          type: \"submit\",\n          children: \"SUBMIT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 1\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(FormUpdate, \"j2ND9AOExTutLj2wgvojmplJii4=\");\n_c = FormUpdate;\nvar _c;\n$RefreshReg$(_c, \"FormUpdate\");","map":{"version":3,"names":["React","useEffect","useState","FormUpdate","onUpdateMessage","message","setMessage","postdescription","setpostDescription","postlocation","setpostLocation","posttype","setpostType","postimage","setPostImage","editId","setEditId","userId","setUserId","edit","JSON","parse","localStorage","getItem","id","user_id","title","description","location","incident_type","image_url","handleFormSubmit","e","preventDefault","fetch","method","headers","body","stringify","then","r","json","updatedMessage","window","reload","target","value"],"sources":["/home/dom/ireporterapp/src/components/SignupSignin/components/user/dashboard/FormUpdate.jsx"],"sourcesContent":["import React,{useEffect, useState} from 'react'\n\nexport default function FormUpdate({ onUpdateMessage}) {\n\nconst [message, setMessage]= useState(\"\")\nconst [postdescription, setpostDescription]= useState(\"\")\nconst [postlocation, setpostLocation]= useState(\"\")\nconst [posttype, setpostType]= useState()\nconst [postimage, setPostImage]= useState(\"\")\nconst [editId, setEditId] = useState(\"\")\nconst [userId, setUserId]= useState(\"\")\n\nuseEffect(()=>{\nconst edit = JSON.parse(localStorage.getItem(\"edit\"));\nsetEditId(edit.id)\nsetUserId(edit.user_id)\nsetMessage(edit.title)\nsetpostDescription(edit.description)\nsetpostLocation(edit.location)\nsetpostType(edit.incident_type)\nsetPostImage(edit.image_url)\n\n},[])\n\n //Handle incident update \n//  function handle_update(formData) {\n//     const id = formData.id\n//     delete formData.id\n//     fetch(`http://[::1]:3000/incidents/${id}`, {\n//       method: 'PATCH',\n//       headers: {\n//         \"Content-Type\": \"application/json\",\n//       },\n//       body: JSON.stringify({\n//         body: formData,\n//       })\n//     })\n//       .then((res) => res.json())\n//       .then((data) => console.log(data))\n//   }\n  \nfunction handleFormSubmit(e) {\n    e.preventDefault();\n\n    fetch(`https://irep-backend.herokuapp.com/incidents/${editId}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        title: message,\n         incident_type:posttype,\n         description:postdescription,\n         image_url: postimage,\n         location: postlocation,\n         user_id: userId\n      }),\n    })\n      .then((r) => r.json())\n      .then((updatedMessage) => onUpdateMessage(updatedMessage));\n      window.location.reload(false);\n  }\n\n\n\n\n  \n\n  return (\n    <div>\n\n<div className=\"form-container_1\" >\n        <form className=\"register-form_1\" onSubmit={handleFormSubmit}>\n\n        <select form=\"Categories\" id=\"field\" className=\"form-field\" autofocus onChange={(e)=>setpostType(e.target.value)}  name=\"incident_type\" value={posttype}>\n            <option value=\"\" disabled>Select</option>\n          \n            <option value=\"intervention\">Create an intervention</option>\n            <option value=\"redflag\">Create a red flag</option>\n          </select>\n        \n          <input id=\"case-title\" className=\"form-field_1\" type=\"text\" placeholder=\"Enter your title\" name=\"title\" onChange={(e)=>setMessage(e.target.value)} value={message}/>\n\n          <input id=\"desc-rption\" className=\"form-field_1\" type=\"text\" placeholder=\"Description\" name=\"description\" onChange={(e)=>setpostDescription(e.target.value)} value={postdescription}/>\n\n\n\n         <input id=\"loc-tion\" className=\"form-field_1\" type=\"text\" placeholder=\"Location\" name=\"location\" onChange={(e)=>setpostLocation(e.target.value)} value={postlocation}/>\n\n         <input id=\"image\"className=\"form-field_1\" type=\"url\" placeholder=\"Image Url\" name=\"image_url\" onChange={(e)=>setPostImage(e.target.value)} value={postimage}/>\n\n\n\n\n          <button className=\"form-field_1\" type=\"submit\">SUBMIT</button>\n        </form>\n      </div>\n\n\n\n\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}